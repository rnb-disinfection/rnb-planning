<?xml version="1.0" ?>
<robot name="kmb" xmlns:xacro="http://ros.org/wiki/xacro">
  <xacro:macro name="kmb" params="robot_id:='0' connected_to:='' xyz:='0 0 0' rpy:='0 0 0'">
    <xacro:unless value="${not connected_to}">
      <joint name="kmb${robot_id}_joint_${connected_to}" type="fixed">
        <parent link="${connected_to}"/>
        <child link="kmb${robot_id}_link_0"/>
        <origin rpy="${rpy}" xyz="${xyz}"/>
      </joint>
    </xacro:unless>
	<xacro:property name="PI" value="3.1415926535897931"/>

	<link name="kmb${robot_id}_link_0"/>
	<link name="kmb${robot_id}_link_x"/>
	<link name="kmb${robot_id}_link_y"/>
	<link name="kmb${robot_id}_link_r">
		<visual>
			<origin xyz="0 0 0" rpy="0 0 0"/>
			<geometry>
				<mesh filename="package://my_mesh/meshes/stl/mobile_ds_res.stl"/>
			</geometry>
			<material name="metal_white"/>
		</visual>
		<collision>
			<origin xyz="0   0  0.220" rpy="0.  0.  0."/>
			<geometry>
				<box size="1.0 0.75 0.438"/>
			</geometry>
		</collision>
		<collision>
			<origin xyz="-0.25   0  0.5" rpy="0.  0.  0."/>
			<geometry>
				<box size="0.5 0.75 0.2"/>
			</geometry>
		</collision>
	</link>

	<joint name="kmb${robot_id}_joint0" type="prismatic">
		<parent link="kmb${robot_id}_link_0"/>
		<child link="kmb${robot_id}_link_x"/>
		<origin xyz="0 0 0" rpy="0 0 0"/>
		<axis xyz="1 0 0"/>
    	<limit effort="10000" lower="-5" upper="5" velocity="1.0"/>
	</joint>

	<joint name="kmb${robot_id}_joint1" type="prismatic">
		<parent link="kmb${robot_id}_link_x"/>
		<child link="kmb${robot_id}_link_y"/>
		<origin xyz="0 0 0" rpy="0 0 0"/>
		<axis xyz="0 1 0"/>
    	<limit effort="10000" lower="-5" upper="5" velocity="1.0"/>
	</joint>

	<joint name="kmb${robot_id}_joint2" type="continuous">
		<parent link="kmb${robot_id}_link_y"/>
		<child link="kmb${robot_id}_link_r"/>
		<origin xyz="0 0 0" rpy="0 0 0"/>
		<axis xyz="0 0 1"/>
    	<limit effort="10000" velocity="1.5708"/>
	</joint>
  </xacro:macro>
</robot>